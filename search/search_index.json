{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Overview","text":""},{"location":"#overview","title":"Overview","text":"<p>Breeze is an external, flexible Asset Manager.</p> <p>It focuses on 3D Animation and opensource software. It is currently being built with Blender in mind. later it will be easily extendable to Krita, Guerilla Render, or any other Software.</p> <ul> <li> <p> External</p> <p>Breeze is not contained within a software.</p> <p>It manages files from the outside, and can work with multiple software simultaneously.</p> </li> <li> <p> Flexible</p> <p>Asset outputs can be cast as ingredient, from anywhere to everywhere.</p> <p>Those ingredients are auto-set, or prefiltered to match the context. But the base setups can be bypassed whenever needed.</p> </li> <li> <p> Consistent</p> <ul> <li>If a shortcut exists somewhere, it also works elsewhere</li> <li>A right click anywhere in a popup will cancel it and close it</li> </ul> </li> </ul>"},{"location":"how_to/","title":"How-to","text":""},{"location":"how_to/#how-to","title":"How-to","text":""},{"location":"roadmap/","title":"Roadmap","text":""},{"location":"roadmap/#roadmap","title":"Roadmap","text":""},{"location":"roadmap/#priority","title":"Priority","text":"<ul> <li> <p>rmb in Users List does not cancel it</p> </li> <li> <p>Turbine:</p> <ul> <li>modeling build: version num + dont overwrite to build over an existing version</li> <li> <p>export modeling: use version num input</p> </li> <li> <p>Create basic processes for modeling -&gt; rigging -&gt; shot     Think about pipeline details later</p> </li> </ul> </li> <li> <p>ExportsTable:</p> <ul> <li>mvd</li> <li>context menu</li> </ul> </li> <li> <p>rigging: build from geo and extra ingredients</p> </li> <li> <p>Recipes: finish required features</p> <ul> <li>ComponentBrowser: remove work components (wait for more exports, for debug purposes)</li> </ul> </li> </ul>"},{"location":"roadmap/#missing-features","title":"Missing features","text":"<ul> <li> <p>Recipes:</p> <ul> <li>toolbar buttons: refresh, autofill, copy, paste, ingredient groups</li> </ul> </li> <li> <p>Turbine:</p> <ul> <li>Jobs list filters</li> <li>relaunch a process from the jobs list</li> </ul> </li> <li> <p>Users:</p> <ul> <li>per project information<ul> <li>roles (sup / lead / graphist / pipe)</li> <li>favorite_assets</li> <li>recent_assets    --&gt; probably a Contributor/Member/PrUser/SubUser document in project_documents, with source_user and the needed extra fields   it is a user with extra project-related fields   can be found with BreezeApp.sub_user</li> </ul> </li> </ul> </li> <li> <p>switch User and Projects</p> <ul> <li>ui to create them</li> </ul> </li> <li> <p>Admin tab: Guis to create and manage db items</p> <ul> <li>Users (for the current project): add users to project / assign roles</li> <li>Stage Templates<ul> <li>process assignment</li> <li>create, delete, icon, color, label, category_filters, assigned_users, etc</li> </ul> </li> </ul> </li> <li> <p>Asset groups</p> </li> <li> <p>Asset data / properties</p> </li> <li> <p>User roles and permissions</p> </li> </ul>"},{"location":"roadmap/#cleans-refactors","title":"Cleans &amp; Refactors","text":"<ul> <li> <p>popups:</p> <ul> <li>transform every popup into browsers with a toolbar style</li> </ul> </li> <li> <p>rework subwidgets hierarchy, move them under Gui/..., utils can probably be removed entirely:</p> <ul> <li>chronometer to Api/utils</li> <li>external toolbar</li> <li>searchbar</li> <li>groups all icon stuff in a single file</li> </ul> </li> <li> <p>mvd: confo and simplify from new knowledge, update stages' mouse events using component tree's code</p> </li> <li> <p>SoftwareClasses: sub-classes for in/out, file management, etc.</p> </li> </ul>"},{"location":"roadmap/#qol-upgrades-to-existing-and-working-features","title":"Qol &amp; Upgrades to existing and working features","text":"<ul> <li> <p>work versions panel: disable when no stages are selected (or a version cannot be created)</p> </li> <li> <p>process_launcher:</p> <ul> <li>cache, remember selected processes and inputs for each context: stage: process ; process: inputs</li> <li>preset the input's height and use scroll area to have a fixed size window</li> </ul> </li> <li> <p>Turbine:</p> <ul> <li>refresh jobs on tab shown</li> <li>show processes and steps duration</li> <li>relaunch from the jobs list</li> </ul> </li> <li> <p>copy/paste users and statuses with ctrl+C/ctrl+V</p> </li> <li> <p>StageTemplateList assignment:</p> <ul> <li>warn if a used stage template is about to be deleted</li> <li>ui to omit or keep them</li> <li>gui to edit recipes</li> </ul> </li> <li> <p>save the gui's state between instances</p> </li> <li> <p>add error messages to steps in step viewer's tree</p> </li> <li> <p>Stage Templates: status and users history</p> </li> <li> <p>Asset browser:</p> <ul> <li>favorites / recent</li> </ul> </li> <li> <p>Ingredient Slots: components history</p> </li> </ul>"},{"location":"features/","title":"Features","text":""},{"location":"features/#features","title":"Features","text":"<p>Breeze is made of multiple contexts. A context is accessible from its tab.</p>"},{"location":"features/#browser","title":"Browser","text":"<p>Create files from assets. Link them together and assemble them into a full project.</p> <p></p>"},{"location":"features/#turbine","title":"Turbine","text":"<p>A history the processes you launched.</p>"},{"location":"features/#admin","title":"Admin","text":"<p>(todo)</p> <ul> <li>Create stage templates and recipe</li> <li>Assign processes to stage templates</li> </ul>"},{"location":"features/admin/","title":"Admin","text":""},{"location":"features/admin/#admin","title":"Admin","text":"<p>(todo)</p> <ul> <li>Create stage templates and recipes</li> <li>Assign processes to stage templates</li> </ul>"},{"location":"features/browser/","title":"Browser","text":"<p>Browser</p>"},{"location":"features/turbine/","title":"Turbine","text":""},{"location":"features/turbine/#turbine","title":"Turbine","text":""},{"location":"reference/","title":"Reference","text":""},{"location":"reference/#reference","title":"Reference","text":""},{"location":"reference/#assets-structure","title":"Assets structure","text":""},{"location":"reference/#recipes","title":"Recipes","text":""},{"location":"reference/#turbine","title":"Turbine","text":""},{"location":"reference/assets_structure/","title":"Assets structure","text":""},{"location":"reference/assets_structure/#assets-structure","title":"Assets Structure","text":"<p>This is the base structure of documents used to register files in the database.</p>"},{"location":"reference/assets_structure/#classes","title":"Classes","text":""},{"location":"reference/assets_structure/#Breeze.Api.document_models.project_documents.Version","title":"<code>Version</code>","text":"<p>An iteration of a file we manipulate.</p> Source code in <code>Breeze\\Api\\document_models\\project_documents.py</code> <pre><code>class Version(Document):\n    \"\"\"\n    An iteration of a file we manipulate.\n    \"\"\"\n    longname = StringField(required=True, primary_key=True)\n\n    component: Component = ReferenceField(document_type=Component, required=True)\n    number: int = IntField(required=True)  # -1 is head\n    software: Software = ReferenceField(document_type=Software, required=True)  # strange to have in exports\n\n    # deduced from upper documents\n    filepath: str = StringField(required=True)\n\n    creation_user: User = ReferenceField(document_type=User, required=True)\n    last_user: User = ReferenceField(document_type=User, required=True)\n\n    # user editable\n    comment: str = StringField(default=\"\")\n\n    creation_time = DateTimeField(default=datetime.now)\n    timestamp = DateTimeField(default=datetime.now)\n    destinations: list[Stage] = SortedListField(ReferenceField(document_type=Stage, default=[]))\n\n    # todo_list = ReferenceField(document_type='Task', default=[])\n    # thumbnail_path = StringField()\n\n    meta = {\n        'collection': 'Versions',\n        'db_alias': 'current_project',\n    }\n\n    def __repr__(self):\n        return f\"&lt;Version&gt;: {self.longname}\"\n\n    def __str__(self):\n        return self.__repr__()\n\n    @classmethod\n    def create(cls, component: Component, number: int, software: Software, **kwargs):\n        longname = f\"{component.longname}_{number:03d}\"\n        existing_version = Version.objects(longname=longname)\n        if existing_version:\n            raise InvalidDocumentError(f\"Version already exists: {existing_version[0]}\")\n\n        creation_user = BreezeApp.user\n        last_user = creation_user\n\n        # get filepath\n        root = BreezeApp.project.root_path\n        filename = f\"{longname}.{component.extension}\"\n        filepath = Path(root).joinpath(*component.to_folders()).joinpath(filename)\n\n        # create dirs\n        Path(filepath).parent.mkdir(parents=True, exist_ok=True)\n\n        # create document\n        kwargs = dict(longname=longname, component=component, number=number, software=software,\n                      creation_user=creation_user, last_user=last_user, filepath=str(filepath),\n                      **kwargs)\n        kwargs = {k: v for k, v in kwargs.items() if v is not None}\n        version = cls(**kwargs)\n        version.save()\n\n        # add to component\n        component.add_version(version)\n\n        print(f\"Created: {version}\")\n        return version\n\n    def set_comment(self, text: str):\n        old_comment = self.comment\n        self.update(comment=text)\n        print(f\"{self}'s comment changed from '{old_comment}' to '{text}'\")\n\n    def increment(self, comment: str = \"\") -&gt; Self:\n        print(f\"Incrementing {self} ... \")\n        new_version = self.component.create_last_version(software=self.software)\n        new_version.update(comment=comment)\n        return new_version\n\n    def open_folder(self):\n        print(f\"Opening in explorer ... '{self.filepath}'\")\n        subprocess.Popen(f'explorer /select,{self.filepath}')\n\n    def copy_longname(self):\n        utils.copy_to_clipboard(text=self.longname)\n\n    def copy_filepath(self):\n        utils.copy_to_clipboard(text=self.filepath)\n\n    def to_file(self) -&gt; AbstractSoftwareFile:\n        # TODO: replace with File.from_version(version: Version)\n        if self.software.label == 'Blender':\n            return BlenderFile(filepath=self.filepath)\n        else:\n            raise NotImplementedError(f\"File instance for: {self.software}\")\n\n    def get_filter_keys(self) -&gt; str:\n        \"\"\" returns a string of keys used with search bars to filter a list of versions \"\"\"\n        # TODO: it does not work with users\n        #  convert date to something that makes sense to write (actual format: 2025-07-13 19:03:53.368000)\n        keys = [\n            f\"{self.number:03d}\",\n            self.creation_user.pseudo,\n            self.creation_user.fullname,\n            self.last_user.pseudo,\n            self.last_user.fullname,\n            self.component.extension or '-',\n            str(self.timestamp),\n        ]\n        result = \" \".join(s for s in keys)\n        return result\n</code></pre>"},{"location":"reference/assets_structure/#Breeze.Api.document_models.project_documents.Component","title":"<code>Component</code>","text":"<p>Represents an independent building component of the project. Contains the iterated Versions from a same file.</p> <p>Examples: <code>geo</code>, <code>rig</code>, <code>anim</code>, etc...</p> Source code in <code>Breeze\\Api\\document_models\\project_documents.py</code> <pre><code>class Component(Document):\n    \"\"\"\n    Represents an independent building component of the project.\n    Contains the iterated Versions from a same file.\n\n    Examples: `geo`, `rig`, `anim`, etc...\n    \"\"\"\n    longname: str = StringField(required=True, primary_key=True)  # category_name_variant_stage_component\n\n    name: str = StringField(required=True)\n    label: str = StringField(required=True)\n    stage: Stage = ReferenceField(document_type=Stage, required=True)\n    extension: str = StringField()  # in work components, get extension from version.software.extension instead\n\n    versions: list['Version'] = SortedListField(ReferenceField(document_type='Version'), default=[])\n    recommended_version: 'Version' = ReferenceField(document_type='Version', default=None)\n\n    # TODO: destinations: list[Stage], reciprocal with Stage.components\n\n    meta = {\n        'collection': 'Components',\n        'db_alias': 'current_project',\n    }\n\n    def __repr__(self):\n        return f\"&lt;Component&gt;: {self.longname}\"\n\n    def __str__(self):\n        return self.__repr__()\n\n    @classmethod\n    def create(cls, name: str, label: str, stage: Stage, extension: str, **kwargs):\n        longname = \"_\".join(s for s in [stage.longname, name, extension])\n        kwargs = dict(longname=longname, name=name, label=label, stage=stage, extension=extension, **kwargs)\n        kwargs = {k: v for k, v in kwargs.items() if v is not None}\n\n        existing_component = Component.objects(longname=longname)\n        if existing_component:\n            raise FileExistsError(f\"{existing_component[0]}\")\n\n        component = cls(**kwargs)\n        component.save()\n        print(f\"Created: {component}\")\n\n        return component\n\n    def to_folders(self) -&gt; list[str]:\n        \"\"\" returns a folder's hierarchy based on its fields \"\"\"\n        folders = self.longname.split(\"_\")  # [character, baby, -, modeling, work, blend]\n        del folders[-1]  # [character, baby, -, modeling, work]\n        folders[-1] = f\"{folders[-1]}_{self.extension}\"  # [character, baby, -, modeling, work_blend]\n        return folders\n\n    def add_version(self, version: 'Version'):\n        if version in self.versions:\n            raise ValueError(f\"{version} is already a version of {self}\")\n        self.versions.append(version)\n        self.save()\n\n    def create_last_version(self, software: Software) -&gt; 'Version':\n        versions: list[Version] = self.versions\n        if not versions:\n            number = 1\n        else:\n            versions = sorted(versions, key=lambda v: v.number, reverse=True)\n            number: int = versions[0].number\n            number += 1\n\n        version = Version.create(component=self, number=number, software=software)\n        return version\n\n    def create_version(self, number: int, software: Software) -&gt; 'Version':\n        version = Version.create(component=self, number=number, software=software)\n        return version\n\n    def get_last_version(self) -&gt; Optional['Version']:\n        versions: list[Version] = self.versions\n        if not versions:\n            return None\n        else:\n            versions = sorted(versions, key=lambda v: v.number, reverse=True)\n            return versions[0]\n\n    def get_version(self, number: int) -&gt; Optional['Version']:\n        versions = [v for v in self.versions if v.number == number]\n        if not versions:\n            return None\n        elif len(versions) &gt; 1:  # this should not be possible\n            raise ValueError(f\"Found more than 1 version with number {number}: {versions}\")\n        else:\n            return versions[0]\n</code></pre>"},{"location":"reference/assets_structure/#Breeze.Api.document_models.project_documents.Stage","title":"<code>Stage</code>","text":"<p>A working step during the creation of an Asset. Uses input components as ingredients and generate output components. Always has a <code>work</code> Component that contains its working files.</p> Source code in <code>Breeze\\Api\\document_models\\project_documents.py</code> <pre><code>class Stage(Document):\n    \"\"\"\n    A working step during the creation of an Asset.\n    Uses input components as ingredients and generate output components.\n    Always has a `work` Component that contains its working files.\n    \"\"\"\n    longname: str = StringField(required=True, primary_key=True)\n    asset: Asset = ReferenceField(document_type=Asset)\n    stage_template: StageTemplate = ReferenceField(document_type=StageTemplate)\n\n    components: list['Component'] = ListField(ReferenceField(document_type='Component'), default=[])\n    work_component: 'Component' = ReferenceField(document_type='Component')\n\n    status: Status = ReferenceField(document_type=Status, default=Status.objects.get(label='WAIT'))\n    # TODO: User unknown, with a question mark icon\n    #  it should appear first in lists, add User.order to have some special users at -1\n    user: User = ReferenceField(document_type=User, default=User.objects.get(pseudo=\"Martin\"))\n\n    ingredients: dict[str, list['Version']] = DictField()  # {name: list[Versions]}\n\n    meta = {\n        'collection': 'Stages',\n        'db_alias': 'current_project',\n    }\n\n    def __repr__(self):\n        return f\"&lt;Stage&gt;: {self.longname}'\"\n\n    def __str__(self):\n        return self.__repr__()\n\n    @classmethod\n    def create(cls, asset: Asset, stage_template: StageTemplate, status: Status=None, **kwargs) -&gt; Self:\n        longname = \"_\".join(s for s in [asset.longname, stage_template.name])\n        kwargs = dict(longname=longname, asset=asset, stage_template=stage_template, status=status, **kwargs)\n        kwargs = {k: v for k, v in kwargs.items() if v is not None}\n        stage = cls(**kwargs)\n        stage.save()\n        print(f\"Created: {stage}\")\n\n        asset.add_stage(stage=stage)\n\n        return stage\n\n    def create_component(self, name: str, label: str, extension: str, crash_if_exists: bool = True) -&gt; 'Component':\n        component = Component.objects(name=name, label=label, extension=extension, stage=self)\n        if len(component) == 1:\n            if crash_if_exists:\n                raise ValueError(f\"{component} is already a component of {self}\")\n            else:\n                return component[0]\n\n        component = Component.create(name=name, label=label, stage=self, extension=extension)\n        self.components.append(component)\n        self.save()\n        return component\n\n    def create_work_component(self, extension: str) -&gt; 'Component':\n        work_component = self.create_component(name=data.Components.work, label=data.Components.work.title(), extension=extension)\n        self.update(work_component=work_component)\n        return work_component\n\n    def add_ingredient(self, name: str, version: 'Version'):\n        if name not in self.ingredients.keys():\n            self.ingredients[name] = []\n        self.ingredients[name].append(version)\n        self.save()\n        self._sort_ingredients()\n        print(f\"{version} was added to the '{name}' ingredients of {self}\")\n\n    def replace_ingredient(self, name: str, old_version: 'Version', new_version: 'Version'):\n        if name not in self.ingredients.keys():\n            raise ValueError(f\"Existing ingredients with name {name} not found in {self}\")\n\n        versions = self.ingredients[name]\n        if old_version not in versions:\n            raise ValueError(f\"Did not find {old_version} in the ingredients {name} of {self}\")\n        versions.remove(old_version)\n        versions.append(new_version)\n\n        self.ingredients[name] = versions\n        self.save()\n        self._sort_ingredients()\n        print(f\"{new_version} replaced {old_version} in the '{name}' ingredients of {self}\")\n\n    def _sort_ingredients(self):\n        sorted_ingredients: dict[str, list[Version]] = {}\n\n        # sort names\n        names = [name for name in self.ingredients.keys()]\n        names.sort()\n        if 'extra' in names:\n            names.remove('extra')\n            names.append('extra')\n\n        # sort versions\n        for name in names:\n            versions = self.ingredients[name]\n            versions = sorted(versions, key=lambda version: (\n                version.component.stage.stage_template.name,\n                version.longname,\n                version.number,\n            ))\n            sorted_ingredients[name] = versions\n\n        # update\n        self.ingredients = sorted_ingredients\n        self.save()\n</code></pre>"},{"location":"reference/assets_structure/#Breeze.Api.document_models.studio_documents.StageTemplate","title":"<code>StageTemplate</code>","text":"<p>Represents a type of Stage, with expected ingredients and associated processes.</p> <p>Examples: <code>modeling</code>, <code>rigging</code>, <code>shading</code>, <code>animation</code>, <code>lighting</code>, etc...</p> Source code in <code>Breeze\\Api\\document_models\\studio_documents.py</code> <pre><code>class StageTemplate(Document):\n    \"\"\"\n    Represents a type of Stage, with expected ingredients and associated processes.\n\n    Examples: `modeling`, `rigging`, `shading`, `animation`, `lighting`, etc...\n    \"\"\"\n    name: str = StringField(required=True, primary_key=True)\n    label: str = StringField(required=True, unique=True)\n\n    order: int = IntField(default=0)\n    color: str = StringField(default=\"#ffffff\")\n    icon_name: str = StringField(default=\"fa5s.question\")\n\n    software: list[Software] = SortedListField(ReferenceField(document_type=Software), default=[])\n    presets: list[str] = ListField(StringField(), default=[])  # TODO: an api to register presets would be easier to edit without using the ui\n\n    processes: list[Process] = SortedListField(ReferenceField(document_type=Process, default=[]))\n    recipe: dict[str, Any] = DictField()  # dict[name, infos], contains IngredientSlots\n\n    meta = {\n        'collection': 'Stage templates',\n        'db_alias': 'default',\n    }\n\n    def __repr__(self):\n        return f\"&lt;Stage template&gt;: {self.name}\"\n\n    def __str__(self):\n        return self.__repr__()\n\n    # NOTE: GUI does not exist yet\n    @classmethod\n    def create(cls, name: str, label: str, color: str = None, icon_name: str = None, **kwargs) -&gt; Self:\n        kwargs = dict(name=name, label=label, color=color, icon_name=icon_name, **kwargs)\n        kwargs = {k: v for k, v in kwargs.items() if v is not None}\n        stage_template = cls(**kwargs)\n        stage_template.save()\n        print(f\"Created: {stage_template}\")\n        return stage_template\n\n    def add_process(self, process: Process):\n        self.processes.append(process)\n        self.save()\n\n    def set_recipe(self, recipe: dict[str, Any]):\n        self.recipe = recipe\n        self.save()\n        print(f\"{self}'s recipe was set to: {recipe}\")\n\n    def set_ingredient_slot(self, slot_name: str, slot_infos: dict[str, Any], crash_if_exists: bool=True):\n        slot_exists = slot_name in self.recipe.keys()\n\n        if slot_exists and crash_if_exists:\n            raise ValueError(f\"{self}'s recipe already has an ingredient slot with name {slot_name}\")\n        self.recipe[slot_name] = slot_infos\n\n        if slot_exists:\n            print(f\"Ingredient {slot_name} was overridden in {self}'s recipe: from {self.recipe[slot_name]} to {slot_infos}\")\n        else:\n            print(f\"Ingredient {slot_name} was added to {self}'s recipe: {slot_infos}\")\n</code></pre>"},{"location":"reference/assets_structure/#Breeze.Api.document_models.project_documents.Asset","title":"<code>Asset</code>","text":"<p>Encapsulates an element from a project. An Asset is made of a category, a name and variant. For every combination of category + name, there is always a default variant <code>-</code> .</p> <p>Examples: <code>character_Gabin_-</code>, <code>set_Playground_broken</code>, <code>element_tree_B</code>, <code>element_tree_C</code>, <code>sequence_sq0020_sh0180</code>, <code>library_lightrigs_master</code>, <code>sandbox_vfx_boom</code></p> Source code in <code>Breeze\\Api\\document_models\\project_documents.py</code> <pre><code>class Asset(Document):\n    \"\"\"\n    Encapsulates an element from a project. An Asset is made of a category, a name and variant.\n    For every combination of category + name, there is always a default variant `-` .\n\n    Examples: `character_Gabin_-`, `set_Playground_broken`, `element_tree_B`, `element_tree_C`,\n    `sequence_sq0020_sh0180`, `library_lightrigs_master`, `sandbox_vfx_boom`\n    \"\"\"\n    longname: str = StringField(required=True, primary_key=True)\n\n    category: str = StringField(required=True)\n    name: str = StringField(required=True)\n    variant: str = StringField(default=\"-\")\n\n    stages: list['Stage'] = ListField(ReferenceField(document_type='Stage'), default=[])\n\n    meta = {\n        'collection': 'Assets',\n        'db_alias': 'current_project'\n    }\n\n    def __repr__(self):\n        return f\"&lt;Asset&gt;: {self.longname}\"\n\n    def __str__(self):\n        return self.__repr__()\n\n    @classmethod\n    def create(cls, category: str, name : str, variant: str = None, **kwargs) -&gt; Self:\n        longname = \"_\".join(s for s in [category, name, variant or \"-\"])\n        kwargs = dict(name=name, category=category, variant=variant, longname=longname, **kwargs)\n        kwargs = {k: v for k, v in kwargs.items() if v is not None}\n        asset = cls(**kwargs)\n        asset.save()\n        print(f\"Created: {asset}\")\n        return asset\n\n    def add_stage(self, stage: 'Stage'):\n        if stage in self.stages:\n            raise ValueError(f\"{stage} is already a stage of {self}\")\n        self.stages.append(stage)\n        self.save()\n\n    def get_stage(self, name: str) -&gt; 'Stage':\n        stage = [stage for stage in self.stages if stage.stage_template.name == name]\n        if not stage:\n            raise ValueError(f\"Stage '{name}' not found in the stages of {self}: {self.stages = }\")\n        return stage[0]\n</code></pre>"},{"location":"reference/assets_structure/#diagram","title":"Diagram","text":"<pre><code>classDiagram\n    direction BT\n\n    Asset --o Stage\n    StageTemplate --o Stage\n    Stage --o Component\n    Component --o Version\n\n    class Asset[\"Asset (Document)\"]{\n        + longname: str\n        + category: str\n        + name: str\n        + variant: str\n        + stages: list[Stage]\n\n        + create() Asset\n        + add_stage()\n        + get_stage() Stage\n    }\n\n    class StageTemplate[\"StageTemplate (Document)\"]{\n        + name: str\n        + label: str\n        + order: int\n        + color: str\n        + icon_name: str\n        + software: Software\n        + presets: list[str]\n        + processes: list[Process]\n        + recipe: dict[str, Any]\n\n        create() StageTemplate\n        add_process()\n        set_recipe()\n        set_ingredient_slot()\n    }\n\n    class Stage[\"Stage (Document)\"]{\n        + longname: str\n        + asset: Asset\n        + stage_template: StageTemplate\n        + components: list[Component]\n        + work_component: Component\n        + status: Status\n        + user: User\n        + ingredients: dict[str, list[Version]]\n\n        + create() Stage\n        + create_component() Component\n        + create_work_component() Component\n        + add_ingredient()\n        + replace_ingredient()\n        - _sort_ingredients()\n    }\n\n    class Component[\"Component (Document)\"]{\n        + longname: str\n        + name: str\n        + label: str\n        + stage: Stage\n        + extension: str\n        + versions: list[Version]\n        + recommended_version: Version\n\n        + create() Component\n        # to_folders() list[str]\n        + add_version()\n        + create_last_version() Version\n        + create_version() Version\n        + get_last_version() Optional[Version]\n        + get_version() Version\n    }\n\n    class Version[\"Version (Document)\"]{\n        + longname: str\n        + component: Component\n        + number: int\n        + software: Software\n        + filepath: str\n        + creation_user: User\n        + last_user: User\n        + comment: str\n        + creation_time: datetime\n        + timestamp: datetime\n\n        + create() Version\n        + set_comment()\n        + increment() Version\n        + open_folder()\n        + copy_longname()\n        + copy_filepath()\n        + to_file() AbstractSoftwareFile\n        + get_filter_keys()\n    }</code></pre>"},{"location":"reference/recipes/","title":"Recipes","text":""},{"location":"reference/turbine/","title":"Turbine","text":""},{"location":"reference/turbine/#turbine","title":"Turbine","text":""},{"location":"reference/turbine/#diagram","title":"Diagram","text":"<pre><code>classDiagram\n    direction BT\n\n    StepLogger --* TurbineStep\n    TurbineStep --|&gt; StepGroup\n    TurbineStep --|&gt; TurbineEngine\n\n    TurbineEngine &lt;--&gt; Process\n    TurbineEngine --&gt; Job\n    TurbineInputs --&gt; Job\n    JobContext --&gt; Job\n\n    TurbineWidgetBase --* TurbineGui\n    TurbineGui --o TurbineEngine\n    TurbineGui --&gt; TurbineInputs\n\n    PillModel --* AbstractPills\n    AbstractPills --|&gt; StepPills\n    StepPills --o StepPill\n    StepPill --* TurbineStep\n\n    class PillModel{\n        + name\n        + icon_name\n        + color\n        + icon()\n    }\n\n    class AbstractPills{\n        + pills\n        + from_name()\n    }\n\n    class StepPills[\"StepPills (AbstractPills)\"]{\n        + idle: PillModel\n        + not_needed: PillModel\n        + running: PillModel\n        + warning: PillModel\n        + error: PillModel\n        + success: PillModel\n    }\n\n    class StepPill{\n        + pill: PillModel\n\n        + from_name()\n        + set_idle()\n        + set_running()\n        + set_warning()\n        + set_error()\n        + set_success()\n    }\n\n    class StepLogger{\n        + stream: StringIO\n        + formatter: logging.Formatter\n        + handler: logging.StreamHandler\n        + logger: logging.Logger\n\n        + info()\n        + debug()\n        + warning()\n        + error()\n        + critical()\n    }\n\n    class TurbineWidgetBase{\n        + name: str\n        + label: str\n\n        - _init_ui()\n        + set_enabled()\n        + export_infos()\n        + import_inputs()\n    }\n\n    class TurbineGui{\n        + context: Jobcontext\n        + widgets: list[TurbineWidgetBase]\n        + layout: QVBoxLayout\n\n        - _init_ui()\n        - _connect_signals()\n        - _init_state()\n        + add_checkbox()\n        + add_combobox()\n        + inputs()\n        + to_database() \n    }\n\n    class TurbineStep{\n        + label: str\n        + sub_label: str\n        + tooltip: str\n        + sub_label: str\n        + Pill: StepPill\n        + logger: StepLogger\n        + steps: list[TurbineStep]\n\n        + set_sub_label()\n        + get_log()\n        + pill() PillModel\n        + add_step() StepBase\n        + add_group() StepGroup\n        + run()\n        - _inner_run()\n        + set_success()\n        + set failed()\n        + to_dict()\n        + from_dict()\n    }\n\n    class StepGroup[\"StepGroup(TurbineStep)\"] {\n        + label: str\n        + sub_label: str\n    }\n\n    class TurbineEngine[\"TurbineEngine (TurbineStep)\"]{\n        + name: str\n        + label: str\n        + tooltip: str\n        + Gui: Type[TurbineGui]\n\n        + from_database() TurbineGui\n        + get_related_process() Process\n        + register()\n        + update_contet()\n        + set_gui()\n        + on_sub_step_updated()\n        + get_class_path() str\n        + create_job() Job\n        + update_job()\n    }\n\n    class TurbineInputs{\n        + use_last_version\n        + version_number\n        etc.\n    }\n\n    class JobContext{\n        + user: User\n        + component: Component\n        + version: Version\n        + creation_time: datetime\n\n        + set_component()\n        + set_version()\n        + update_creation_time()\n    }\n\n    class Process [\"Process (Document)\"] {\n        + longname: str\n        + class_path: str\n        + label: str\n        + tooltip: str\n\n        + create() Process\n    }\n\n    class Job [\"Job (Document)\"] {\n        + longname: str\n        + user: User\n        + creation_time: datetime\n        + source_process: Process\n        + source_version: Version\n        + steps: dict[str, any]\n        + inputs: dict[str, Any]\n\n        + create() Job\n    }\n</code></pre>"},{"location":"reference/turbine/#classes","title":"Classes","text":""},{"location":"reference/turbine/#Breeze.Utils.pills.PillModel","title":"<code>PillModel</code>  <code>dataclass</code>","text":"Source code in <code>Breeze\\Utils\\pills.py</code> <pre><code>@dataclass\nclass PillModel:\n    name: str\n    icon_name: str\n    color: str\n\n    def __repr__(self):\n        return f\"&lt;Pill&gt; {self.name}\"\n\n    @property\n    def icon(self) -&gt; QIcon:\n        return qtawesome.icon(self.icon_name, color=self.color)\n</code></pre>"},{"location":"reference/turbine/#Breeze.Utils.pills.AbstractPills","title":"<code>AbstractPills</code>","text":"Source code in <code>Breeze\\Utils\\pills.py</code> <pre><code>class AbstractPills:\n    pills: list[PillModel] = []\n\n    @classmethod\n    def from_name(cls, name: str) -&gt; Optional[PillModel]:\n        for pill in cls.pills:\n            if name == pill.name:\n                return pill\n        else:\n            return None\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.utils.StepPills","title":"<code>StepPills</code>  <code>dataclass</code>","text":"Source code in <code>Breeze\\Api\\turbine\\utils.py</code> <pre><code>@dataclass\nclass StepPills(AbstractPills):\n    idle =       PillModel(name=\"idle\", icon_name=\"mdi.dots-horizontal\", color=\"grey\")\n    not_needed = PillModel(name=\"not_needed\", icon_name=\"fa.minus\", color=\"purple\")\n    running =    PillModel(name=\"running\", icon_name=\"fa.play\", color=\"deepskyblue\")\n    warning =    PillModel(name=\"warning\", icon_name=\"fa.warning\", color=\"orange\")\n    error =      PillModel(name=\"error\", icon_name=\"fa.close\", color=\"red\")\n    success =    PillModel(name=\"success\", icon_name=\"fa.check\", color=\"green\")\n\n    pills = [idle, not_needed, running, warning, error, success]\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.utils.StepPill","title":"<code>StepPill</code>","text":"Source code in <code>Breeze\\Api\\turbine\\utils.py</code> <pre><code>class StepPill(QObject):\n    def __init__(self):\n        super().__init__()\n        self.pill: PillModel = StepPills.idle\n        self.set_idle()\n\n    @classmethod\n    def from_name(cls, name: str) -&gt; 'StepPill':\n        step_pill = cls()\n        step_pill.pill = StepPills.from_name(name=name)\n        return step_pill\n\n    def set_idle(self):\n        self.pill = StepPills.idle\n\n    def set_running(self):\n        self.pill = StepPills.running\n\n    def set_warning(self):\n        self.pill = StepPills.warning\n\n    def set_error(self):\n        self.pill = StepPills.error\n\n    def set_success(self):\n        self.pill = StepPills.success\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.logger.StepLogger","title":"<code>StepLogger</code>","text":"Source code in <code>Breeze\\Api\\turbine\\logger.py</code> <pre><code>class StepLogger:\n    def __init__(self, name: str):\n        stream = StringIO()\n        formatter = logging.Formatter('%(asctime)s - %(levelname)-8s: %(message)s', datefmt='%H:%M:%S')\n\n        handler = logging.StreamHandler()\n        handler.setStream(stream)\n        handler.setLevel(logging.DEBUG)\n        handler.setFormatter(formatter)\n\n        logger = logging.getLogger(name)\n        logger.setLevel(logging.DEBUG)\n        if logger.hasHandlers():\n            logger.handlers.clear()\n        logger.addHandler(handler)\n\n        self.logger = logger\n        self.stream = stream\n\n    def info(self, msg: str):\n        self.logger.info(msg)\n\n    def debug(self, msg: str):\n        self.logger.debug(msg)\n\n    def warning(self, msg: str):\n        self.logger.warning(msg)\n\n    def error(self, msg: str):\n        self.logger.error(msg)\n\n    def critical(self, msg: str):\n        self.logger.critical(msg)\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.inputs_widgets.TurbineWidgetBase","title":"<code>TurbineWidgetBase</code>","text":"<p>A base layout with a label, to be extended with a control widget</p> Source code in <code>Breeze\\Api\\turbine\\inputs_widgets.py</code> <pre><code>class TurbineWidgetBase(QWidget):\n    \"\"\" A base layout with a label, to be extended with a control widget \"\"\"\n    def __init__(self, name: str, label: str):\n        super().__init__()\n        self.name = name\n        self.label = label\n        self._init_ui()\n\n    def _init_ui(self):\n        layout = QHBoxLayout()\n        self.setLayout(layout)\n        layout.setAlignment(QtCore.Qt.AlignmentFlag.AlignTop | QtCore.Qt.AlignmentFlag.AlignLeft)\n        layout.setContentsMargins(0, 0, 0, 0)\n        layout.setSpacing(0)\n\n        label_widget = QLabel(self.label)\n        label_widget.setFixedWidth(96)\n        layout.addWidget(label_widget)\n\n        self.layout = layout\n        self.label_widget = label_widget\n\n    def set_enabled(self, is_enabled: bool):\n        self.label_widget.setEnabled(is_enabled)\n\n    def export_infos(self) -&gt; dict[str, any]:\n        pass\n\n    def import_inputs(self, **kwargs):\n        pass\n</code></pre>"},{"location":"reference/turbine/#Breeze.Gui.main_windows.turbine.TurbineGui","title":"<code>TurbineGui</code>","text":"Source code in <code>Breeze\\Gui\\main_windows\\turbine.py</code> <pre><code>class TurbineGui(QMainWindow):\n    def __init__(self):\n        super().__init__()\n        self._init_ui()\n        self._connect_signals()\n\n    def _init_ui(self):\n        select_process_panel = SelectProcessPanel()\n        dock = QDockWidget()\n        dock.setWindowTitle(\"Jobs\")\n        dock.setWidget(select_process_panel)\n        self.addDockWidget(QtCore.Qt.DockWidgetArea.LeftDockWidgetArea, dock)\n        dock.setAllowedAreas(QtCore.Qt.DockWidgetArea.LeftDockWidgetArea)\n\n        steps_viewer_panel = StepsViewer()\n        self.setCentralWidget(steps_viewer_panel)\n\n        logs_panel = StepLogsPanel()\n        dock = QDockWidget()\n        dock.setWindowTitle(\"Logs\")\n        dock.setWidget(logs_panel)\n        self.addDockWidget(QtCore.Qt.DockWidgetArea.BottomDockWidgetArea, dock)\n        dock.setAllowedAreas(QtCore.Qt.DockWidgetArea.BottomDockWidgetArea)\n\n        self.setCorner(QtCore.Qt.Corner.BottomLeftCorner, QtCore.Qt.DockWidgetArea.LeftDockWidgetArea)\n\n        self.select_process_panel = select_process_panel\n        self.steps_viewer_panel = steps_viewer_panel\n        self.logs_panel = logs_panel\n\n    def _connect_signals(self):\n        self.select_process_panel.jobs_list.job_selected.connect(self.on_job_selected)\n        self.steps_viewer_panel.step_selected.connect(self.on_step_selected)\n\n    def on_job_selected(self):\n        job = self.select_process_panel.jobs_list.get_selected_job()\n        self.steps_viewer_panel.populate(job=job)\n\n    def on_step_selected(self):\n        log = self.steps_viewer_panel.selected_step_log\n        print(f\"{log = }\")\n        self.logs_panel.set_log(log=log)\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.step.TurbineStep","title":"<code>TurbineStep</code>","text":"Source code in <code>Breeze\\Api\\turbine\\step.py</code> <pre><code>class TurbineStep(QObject):\n    updated = Signal()\n    label: str = \"step_label\"\n    sub_label: str = None\n    tooltip: str = \"step_tooltip\"\n\n    def __init__(self, sub_label: str = None):\n        super().__init__()\n        self.comes_from_dict: bool = False\n        self.sub_label: str = sub_label\n        self.Pill: StepPill = StepPill()\n        self.logger: StepLogger = StepLogger(name=f\"{self.label}__{self.sub_label}__{os.urandom(4)}\")\n\n        self.steps: list[TurbineStep] = []\n\n        self.logger.info(f\"Starting step '{self.label}' ... \")\n        self.log_output = \"\"  # used with Self.from_dict() to recover log\n\n    def set_sub_label(self, sub_label: str):\n        self.sub_label = sub_label\n\n    def get_log(self) -&gt; str:\n        if self.comes_from_dict:\n            return self.log_output\n        else:\n            return self.logger.stream.getvalue()\n\n    @property\n    def pill(self) -&gt; PillModel:\n        return self.Pill.pill\n\n    def add_step(self, step: TypeTurbineStep) -&gt; TypeTurbineStep:\n        self.steps.append(step)\n        step.updated.connect(self.on_sub_step_updated)\n        return step\n\n    def add_group(self, label: str, sub_label: str = None) -&gt; 'StepGroup':\n        step_group = self.add_step(StepGroup(label=label, sub_label=sub_label))\n        return step_group\n\n    def on_sub_step_updated(self):\n        self.updated.emit()\n\n    def run(self, **kwargs):\n        # TODO: duration\n\n        self.Pill.set_running()\n        try:\n            self._inner_run(**kwargs)\n            self.set_success()\n\n        except Exception as e:\n            self.set_failed()\n\n    def _inner_run(self, **kwargs):\n        # override with actions\n        pass\n\n    def set_success(self):\n        self.updated.emit()\n        self.logger.info(msg=f\"... step '{self.label}': SUCCESS \\n\")\n        self.Pill.set_success()\n\n    def set_failed(self):\n        self.logger.error(msg=traceback.format_exc())\n        self.Pill.set_error()\n        self.updated.emit()\n        raise RuntimeError(traceback.format_exc(chain=False))\n\n    # translators\n    def to_dict(self) -&gt; dict[str, any]:\n        return StepTranslator.to_dict(step=self)\n\n    @classmethod\n    def from_dict(cls, infos: dict[str, any]) -&gt; 'TurbineStep':\n        return StepTranslator.from_dict(infos=infos)\n\n    def to_tree_item(self) -&gt; QTreeWidgetItem:\n        return StepTranslator.to_tree_item(step=self)\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.step.StepGroup","title":"<code>StepGroup</code>","text":"Source code in <code>Breeze\\Api\\turbine\\step.py</code> <pre><code>class StepGroup(TurbineStep):\n    def __init__(self, label: str, sub_label: str = None):\n        self.label = label\n        super().__init__(sub_label = sub_label)\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.engine.TurbineEngine","title":"<code>TurbineEngine</code>","text":"Source code in <code>Breeze\\Api\\turbine\\engine.py</code> <pre><code>class TurbineEngine(TurbineStep):\n    name: str = \"process_name\"\n    label: str = \"process_label\"\n    tooltip: str = \"process_tooltip\"\n    Gui: Type[TurbineGui] = TurbineGui\n\n    @classmethod\n    def from_database(cls, process: Process, context: JobContext) -&gt; Self:\n        \"\"\" Returns the instance of TurbineEngine that matches the given process \"\"\"\n        module_path, class_name = process.class_path.rsplit('.', 1)\n        try:\n            module = importlib.import_module(module_path)\n        except:\n            raise ValueError(f\"module not found from path {module_path}\")\n        ProcessEngine: Type[Self] = getattr(module, class_name)\n        engine = ProcessEngine(context=context)\n        return engine\n\n    @classmethod\n    def get_related_process(cls) -&gt; Process | None:\n        process = Process.objects(longname=cls.name)\n        if process:\n            return process[0]\n        else:\n            return None\n\n    @classmethod\n    def register(cls):\n        \"\"\" Create the Process in the database, or update it if it exists \"\"\"\n        process = cls.get_related_process()\n        if process is None:\n            Process.create(longname=cls.name, class_path=cls.get_class_path(), label=cls.label, tooltip=cls.tooltip)\n        else:\n            process.update(class_path=cls.get_class_path(), label=cls.label, tooltip=cls.tooltip)\n\n    def __init__(self, context: JobContext):\n        super().__init__(sub_label=None)\n        self.context = context\n        self.gui = self.Gui(context=context)\n        self.update_context()\n        self.job: Optional[Job] = None\n\n    def update_context(self):\n        \"\"\" update the Context based on the given inputs \"\"\"\n        inputs = self.gui.inputs\n        if inputs is None:\n            return\n\n        if inputs.use_last_version:\n            version = self.context.component.get_last_version()\n        elif inputs.version_number is not None:\n            version = self.context.component.get_version(number=inputs.version_number)\n        else:\n            version = None\n\n        self.context.set_version(version=version)\n\n    def set_gui(self, gui: TurbineGui):\n        self.gui = gui\n\n    def _add_steps(self):\n        \"\"\" Add steps here rather than during init so that inputs can be updated in-between \"\"\"\n        pass\n\n    def run(self):\n        self._add_steps()\n        self.job = self.create_job()\n        self.Pill.set_idle()\n\n        self.logger.debug(f\"{self.gui.inputs = }\")\n        self.Pill.set_running()\n\n        try:\n            super().run()\n            self.Pill.set_success()\n        except RuntimeError:\n            print(f\"{self.label = }\")\n            print(traceback.format_exc(chain=False))\n            self.Pill.set_error()\n\n        self.update_job()\n\n    def on_sub_step_updated(self):\n        super().on_sub_step_updated()\n        self.update_job()\n    # ------------------------\n    # process\n    # ------------------------\n\n    @classmethod\n    def get_class_path(cls) -&gt; str:\n        path = f\"{cls.__module__}.{cls.__qualname__}\"\n        return str(path)\n\n    # ------------------------\n    # jobs\n    # ------------------------\n    def create_job(self) -&gt; Job:\n        \"\"\" Saves this engine's run as a Job in the db\"\"\"\n        self.register()\n        source_process = Process.objects.get(longname=self.name, label=self.label, tooltip=self.tooltip, class_path=self.get_class_path())\n\n        job = Job.create(source_process=source_process,\n                         steps=self.to_dict(),\n                         inputs=self.gui.to_database(),\n                         user=self.context.user,\n                         version=self.context.version,\n                         creation_time=self.context.creation_time)\n        return job\n\n    def update_job(self):\n        \"\"\" Updates the current job \"\"\"\n        self.job.update(steps=self.to_dict())\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.utils.TurbineInputs","title":"<code>TurbineInputs</code>  <code>dataclass</code>","text":"Source code in <code>Breeze\\Api\\turbine\\utils.py</code> <pre><code>@dataclass\nclass TurbineInputs:\n    use_last_version: bool = True\n    version_number: int = None\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.turbine.utils.JobContext","title":"<code>JobContext</code>  <code>dataclass</code>","text":"Source code in <code>Breeze\\Api\\turbine\\utils.py</code> <pre><code>@dataclass\nclass JobContext:\n    # NOTE: component and version are split, because a build process may use a component with 0 versions in it\n    user: User\n    component: Component\n    version: Optional[Version]\n    creation_time: datetime = field(default_factory=datetime.now)  # creation_time = datatime.now() would only update on first import\n\n    def set_component(self, component: Component = None):\n        self.component = component\n\n    def set_version(self, version: Version = None):\n        self.version = version\n        self.component = version.component\n\n    def update_creation_time(self):\n        self.creation_time = datetime.now()\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.document_models.studio_documents.Process","title":"<code>Process</code>","text":"Source code in <code>Breeze\\Api\\document_models\\studio_documents.py</code> <pre><code>class Process(Document):\n    longname: str = StringField(required=True, primary_key=True)\n    class_path: str = StringField(required=True)\n    label: str = StringField(required=True)\n    tooltip: str = StringField(required=True)\n\n    # NOTE: label and tooltip are there to be displayed in delegates\n\n    meta = {\n        'collection': 'Processes',\n        'db_alias': 'default',\n    }\n\n    def __repr__(self):\n        return f\"&lt;Process&gt;: {self.longname}\"\n\n    def __str__(self):\n        return self.__repr__()\n\n    @classmethod\n    def create(cls, longname: str, class_path: str, label: str, tooltip: str, **kwargs) -&gt; Self:\n        kwargs = dict(longname=longname, class_path=class_path, label=label, tooltip=tooltip, **kwargs)\n        kwargs = {k: v for k, v in kwargs.items() if v is not None}\n        process = cls(**kwargs)\n        process.save()\n        print(f\"Created: {process}\")\n        return process\n</code></pre>"},{"location":"reference/turbine/#Breeze.Api.document_models.project_documents.Job","title":"<code>Job</code>","text":"Source code in <code>Breeze\\Api\\document_models\\project_documents.py</code> <pre><code>class Job(Document):\n    longname: str = StringField(required=True, primary_key=True) # name + date\n    user: User = ReferenceField(document_type=User, required=True)\n    creation_time = DateTimeField(default=datetime.now)\n    source_process: Process = ReferenceField(document_type=Process, required=True)\n    source_version: Version = ReferenceField(document_type=Version, required=True)\n    steps: dict[str, any] = DictField(required=True)\n    inputs: dict[str, Any] = DictField()  # dict[name: widget_infos]\n\n    meta = {\n        'collection': 'Jobs',\n        'db_alias': 'current_project',\n    }\n\n    def __repr__(self):\n        return f\"&lt;Job&gt;: {self.longname}\"\n\n    def __str__(self):\n        return self.__repr__()\n\n    @classmethod\n    def create(cls, source_process: Process, steps: dict[str, any], inputs: dict[str, any],\n               user: User, version: Version, creation_time: datetime,\n               **kwargs) -&gt; Self:\n        longname = \" \".join(s for s in [source_process.longname, version.longname, user.pseudo, str(creation_time)])\n        kwargs = dict(longname=longname, creation_time=creation_time, user=user,\n                      source_process=source_process, source_version=version,\n                      steps=steps, inputs=inputs, **kwargs)\n        kwargs = {k: v for k, v in kwargs.items() if v is not None}\n\n        process = cls(**kwargs)\n        process.save()\n        print(f\"Created: {process}\")\n\n        return process\n</code></pre>"}]}